<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>sip信令请求与应答包头的处理</title>
      <link href="/2020/03/18/sip-xin-ling-qing-qiu-yu-ying-da-bao-tou-de-chu-li/"/>
      <url>/2020/03/18/sip-xin-ling-qing-qiu-yu-ying-da-bao-tou-de-chu-li/</url>
      
        <content type="html"><![CDATA[<p>1、应答中的 From 头域必须和请求中的 From 头域相等。</p><p>2、应答中的 Call-ID 头域必须和请求中的 Call-ID 头域相等。</p><p>3、应答中的 Cseq 头域必须和请求中的 Cseq 头域相等。</p><p>4、应答中的 Via 头域必须和请求中的 Via 头域相等，而且顺序也必须相等。</p><p>5、如果请求中包含了 To tag ，那么应答中的 To 头域必须和请求中的 To 头域相等。</p><p>6、如果请求中的 To 头域并不包含 Tag,  那么应答中的 To 头域的 URI 必须和请求中的 TO 头域的 URI 相等；</p><p>7、此外， UAS 还必须增加一个 Tag 到 To 头域上（ 100 （ trying ）应答是一个例外，在 100 中可能已经存在了一个 tag ）。这就提供了一个 UAS 正在应答的标志，也许就是对话 ID 的一部分。对同一个请求来说，它的应答必须有相同的 tag 标志，包括终结应答和临时应答（同样 100 （ trying ）除外）。</p><p><img src="/images/pasted-166.png" alt="实际包头对比确实一样"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIP信令应答码</title>
      <link href="/2020/03/18/sip-xin-ling-ying-da-ma/"/>
      <url>/2020/03/18/sip-xin-ling-ying-da-ma/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/pasted-164.png" alt="应答码"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rfc3261—sip信令交互规范下载</title>
      <link href="/2020/03/18/rfc3261-sip-xin-ling-jiao-hu-gui-fan-xia-zai/"/>
      <url>/2020/03/18/rfc3261-sip-xin-ling-jiao-hu-gui-fan-xia-zai/</url>
      
        <content type="html"><![CDATA[<p><a href="/download/rfc3261.pdf"">rfc3261英文版点击下载</a><br><a href="/download/RFC3261-中文.pdf"">rfc3261中文版点击下载</a></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sip信令notify消息捕捉问题</title>
      <link href="/2020/03/17/sip-xin-ling-notify-xiao-xi-bu-zhuo-wen-ti/"/>
      <url>/2020/03/17/sip-xin-ling-notify-xiao-xi-bu-zhuo-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="一、报错描述"><a href="#一、报错描述" class="headerlink" title="一、报错描述"></a>一、报错描述</h2><p>在成功向sip server发送register后，server会发送notify消息</p><p><img src="/images/pasted-162.png" alt=""></p><h2 id="二、分析"><a href="#二、分析" class="headerlink" title="二、分析"></a>二、分析</h2><p>client监听端口捕捉不到notify消息，导致没法正确处理<br>1、经查看RFC3261标准，发现一个UA每次注册必须要用同一个callid</p><p><img src="/images/pasted-168.png" alt="same callid in one transaction"></p><p><img src="/images/pasted-169.png" alt="需要用相同的callid更新注册周期"></p><p><img src="/images/pasted-170.png" alt="两次注册间的callid不一样"></p><p><img src="/images/pasted-163.png" alt="很多老外也遇到这个问题（11年前。。。）"></p><h2 id="三、解决（ing）"><a href="#三、解决（ing）" class="headerlink" title="三、解决（ing）"></a>三、解决（ing）</h2><p>时间短任务重，目前没有影响，悬而未决中。。。</p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于java的sip信令注册流程梳理</title>
      <link href="/2020/03/17/ji-yu-java-de-sip-xin-ling-zhu-ce-liu-cheng-shu-li/"/>
      <url>/2020/03/17/ji-yu-java-de-sip-xin-ling-zhu-ce-liu-cheng-shu-li/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/pasted-157.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于java的sip信令消息初始化梳理</title>
      <link href="/2020/03/17/ji-yu-java-de-sip-xin-ling-xiao-xi-chu-shi-hua-shu-li/"/>
      <url>/2020/03/17/ji-yu-java-de-sip-xin-ling-xiao-xi-chu-shi-hua-shu-li/</url>
      
        <content type="html"><![CDATA[<p><img src="/images/pasted-156.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIP—SipProvider梳理</title>
      <link href="/2020/03/16/sip-sipprovider-shu-li/"/>
      <url>/2020/03/16/sip-sipprovider-shu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="一、SipProvider"><a href="#一、SipProvider" class="headerlink" title="一、SipProvider"></a>一、SipProvider</h2><p>1、通用ClientTransaction.sendRequest()</p><p>2、stateful：ServerTransaction.sendResponse(Response)</p><p>3、dialog stateful：Dialog.sendRequest(ClientTransaction)<br>Dialog.sendAck(Request)</p><p>4、stateless:sendResponse(Response)<br>sendRequest(Request)</p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIP—SipListener梳理</title>
      <link href="/2020/03/16/sip-siplistener-shu-li/"/>
      <url>/2020/03/16/sip-siplistener-shu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="一、SipListener"><a href="#一、SipListener" class="headerlink" title="一、SipListener"></a>一、SipListener</h2><p>1、建立应用与sip协议栈之间的沟通桥梁</p><p>2、捕捉sip信令交互事件，用于后续处理</p><p>3、划分：request/response/timeout/ioexception/transaction/dialogterminate</p><p>4、一个sip协议栈有一个SipListener,且只允许一个SipListener注册，一个SipListener允许注册到多个sip协议栈</p><p>5、request消息（transaction）有状态和无状态的发送途径：SipProvider、ClientTransaction.sendRequest()</p><p>6、 response消息可以通过ServerTransaction.sendResponse(Response) 回复</p><p>7、request消息（dialog）回复： Dialog.sendRequest(ClientTransaction)</p><h2 id="二、方法"><a href="#二、方法" class="headerlink" title="二、方法"></a>二、方法</h2><p>1、void processTransactionTerminated(TransactionTerminatedEvent transactionTerminatedEvent)</p><p>2、void processIOException(IOExceptionEvent exceptionEvent)</p><p>3、void processRequest(RequestEvent requestEvent)</p><p>3.1 消息处理：</p><p>1）在servertransaction为null时，如果应用程序决定有状态地响应请求，则必须从SipProvider.getNewServerTransaction（Request）方法请求新的服务器事务，并使用此服务器事务根据请求的内容发送响应。</p><p>2）在servertransaction不为null时，应用基于request消息操作</p><p>3.2 UAS行为：</p><p>1）回复2XX是接受，同时会建立一个会话session</p><p>2）回复3xx/4XX/5xx/6xx表示不接受，含义不同；</p><p>3）回复1xx代表建议client继续呼叫（临时回复）</p><p>3.3 有状态代理：</p><p>3.3.1 处理每次收到的request必须重新建立一个transaction</p><p>3.3.2 代理前转步骤：<br>1）拷贝一份request<br>2）更新request URI<br>3) 更新Max-Forwards header<br>4）选择性添加记录路由头<br>5）选择性添加包头<br>6）Postprocess 路由信息<br>7）提取下一跳地址、端口和协议<br>8）加穿越头<br>9）必要时添加内容长度标题<br>10） ClientTransaction.sendRequest()基于这个前转一个新request<br>11）基于 processResponse(ResponseEvent)处理所有收到的响应<br>12）不发100（Trying）响应给非invite请求</p><p>3.3.3 可以fork多个request到不通的远端，必须要用stateful协议</p><p>3.4 无状态代理（requestEvent.getServerTransaction() == null）</p><p>3.4.1 无状态代理对transaction没有任何感知</p><p>3.4.2 处理请求步骤：<br>1）验证请求<br>2）预处理路由信息<br>3）确定请求的单个目标<br>4）基于 SipProvider.sendRequest(Request)转request到目标地址<br>5）不对cancel请求进行处理</p><p>4、void processResponse(ResponseEvent responseEvent)</p><p>4.1 响应处理</p><p>4.1.1 response可能与存在的request应用不相干</p><p>4.1.2 如果responseEvent.getClientTransaction() == null,则不相干，并被认为是偏离消息，用SipProvider.sendResponse(Response)处理；<br>不等于Null,则基于response消息进行处理</p><p>4.1.3 UAC处理行为：</p><p>1）要回ACK给所有最终收到的响应</p><p>2）response在300~699之间，ACK为transaction层发起的结束</p><p>3）response是2XX，ACK为UAC应用发起的结束，同时建立UAC和UAS之间的链接</p><p>4.2 stateful代理处理步骤：<br>1）找响应上下文<br>2）移除掉via头字段<br>3）添加response内容到respongse消息中<br>4）检查是否可以直接前转发送<br>5）选择最佳response（没看懂）</p><p>5、void processTimeout(TimeoutEvent timeoutEvent)<br>超时</p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIP—ListeningPoint梳理</title>
      <link href="/2020/03/16/sip-listeningpoint-shu-li/"/>
      <url>/2020/03/16/sip-listeningpoint-shu-li/</url>
      
        <content type="html"><![CDATA[<p>1、监听网络端口<br>2、默认端口5060、5061<br>3、支持SCTP、TCP、TLS、UDP<br>4、    getIPAddress()：获取侦听点IP地址<br>5、    getPort()：获取侦听端口<br>6、    getSentBy()<br>7、    getTransport()<br>8、    setSentBy(String sentBy)：设定sentby string</p><p><img src="/images/pasted-116.png" alt="实例"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIP信令流程梳理</title>
      <link href="/2020/03/16/sip-xin-ling-liu-cheng-shu-li/"/>
      <url>/2020/03/16/sip-xin-ling-liu-cheng-shu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="一、注册"><a href="#一、注册" class="headerlink" title="一、注册"></a>一、注册</h2><p><img src="/images/pasted-113.png" alt="sip注册流程"></p><h2 id="二、基本通话流程"><a href="#二、基本通话流程" class="headerlink" title="二、基本通话流程"></a>二、基本通话流程</h2><p><img src="/images/pasted-114.png" alt="基本通话流程"></p><h2 id="三、被叫未摘机主叫挂机"><a href="#三、被叫未摘机主叫挂机" class="headerlink" title="三、被叫未摘机主叫挂机"></a>三、被叫未摘机主叫挂机</h2><p><img src="/images/pasted-115.png" alt="主叫挂机"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sip-Dialog示例</title>
      <link href="/2020/03/15/sip-dialog-shi-li/"/>
      <url>/2020/03/15/sip-dialog-shi-li/</url>
      
        <content type="html"><![CDATA[<h2 id="一、dialog"><a href="#一、dialog" class="headerlink" title="一、dialog"></a>一、dialog</h2><p>1、端到端的dialog连接<br>2、有状态机，如下：<br>Invite Dialog States:<br>Null –&gt; Early –&gt; Confirmed –&gt; Terminated</p><p>Other Dialog-creating Requests Dialog States (ie. SUBSCRIBE):<br>Null –&gt; Confirmed –&gt; Terminated.</p><h2 id="二、方法"><a href="#二、方法" class="headerlink" title="二、方法"></a>二、方法</h2><p>1、    createAck(long cseq)<br>2、  createPrack(Response relResponse)<br>3、    createReliableProvisionalResponse(int statusCode)<br>4、    createRequest(String method)<br>5、    delete()<br>6、    getApplicationData()<br>7、    getCallId()<br>8、    getDialogId()<br>9、    getLocalParty()<br>10、    getLocalSeqNumber()<br>11、    getLocalTag()<br>12、    getRemoteParty()<br>13、    getRemoteSeqNumber()<br>14、    getRemoteTag()<br>15、    getRemoteTarget()<br>16、    getRouteSet()<br>17、    getState()<br>18、    incrementLocalSequenceNumber()<br>19、    isSecure()<br>20、    isServer()<br>21、    sendAck(Request ackRequest)<br>22、    sendReliableProvisionalResponse(Response relResponse)<br>23、    sendRequest(ClientTransaction clientTransaction)<br>24、    setApplicationData(Object applicationData)<br>25、    terminateOnBye(boolean terminateFlag)</p><h2 id="三、实例"><a href="#三、实例" class="headerlink" title="三、实例"></a>三、实例</h2><p>待补充</p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sip-ClientTransaction示例</title>
      <link href="/2020/03/13/sip-clienttransaction-shi-li/"/>
      <url>/2020/03/13/sip-clienttransaction-shi-li/</url>
      
        <content type="html"><![CDATA[<h2 id="一、ClientTransaction"><a href="#一、ClientTransaction" class="headerlink" title="一、ClientTransaction"></a>一、ClientTransaction</h2><p>1、客户端向sip服务器发请求<br>2、客户端匹配sip服务器的响应及激活后续信令交互<br>3、由SipProvider.getNewClientTransaction(Request)产生<br>4、根据响应选择下一步操作（开发）<br>5、超时响应<br>6、客户端的一个任务需要一系列ClientTransaction<br>7、事务ID必须唯一，由from/to/callid/cia/cseq等经过算法计算得来<br>8、更多详细定义参考RFC-3261</p><h2 id="二、信令交互举例"><a href="#二、信令交互举例" class="headerlink" title="二、信令交互举例"></a>二、信令交互举例</h2><p>Invite Transaction:<br>Calling –&gt; Proceeding –&gt; Completed –&gt; Terminated</p><p>Non-Invite Transaction:<br>Trying –&gt; Proceeding –&gt; Completed –&gt; Terminated</p><h2 id="三、方法"><a href="#三、方法" class="headerlink" title="三、方法"></a>三、方法</h2><p>1、createAck(): 被绊了</p><p>2、createCancel()：从与该客户端事务关联的请求创建cancel信令，调用后发送到server</p><p>3、sendRequest()：发送事务内的request，调用后发送到server</p><p>4、继承方法<br>getApplicationData, getBranchId, getDialog, getRequest, getRetransmitTimer, getState, setApplicationData, setRetransmitTimer, terminate</p><h2 id="四、实例"><a href="#四、实例" class="headerlink" title="四、实例"></a>四、实例</h2><p><img src="/images/pasted-110.png" alt="获取branchID和发送request"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jain-sip-ri/javax.sip*sip信令交互应用梳理</title>
      <link href="/2020/03/13/jain-sip-ri-javax-sdp-javax-sip-kuang-jia-shu-li/"/>
      <url>/2020/03/13/jain-sip-ri-javax-sdp-javax-sip-kuang-jia-shu-li/</url>
      
        <content type="html"><![CDATA[<p>pre:<br>sip信令是VOIP、NGN、IMS以及5G网络都应用的随路信令，开发电信网元稳定性是首要因素，现梳理jain-sip，以便系统性掌握，用于指导后续开发与实践。</p><p>logs:<br>2020.03.13: 首次更新</p><h2 id="一、jain-sip-ri组成"><a href="#一、jain-sip-ri组成" class="headerlink" title="一、jain-sip-ri组成"></a>一、jain-sip-ri组成</h2><p>1、为android开发提供支撑<br>2、为测试提供支撑<br>3、为java开发提供支撑（主要分析）</p><h2 id="二、框架梳理（更新ing）"><a href="#二、框架梳理（更新ing）" class="headerlink" title="二、框架梳理（更新ing）"></a>二、框架梳理（更新ing）</h2><h3 id="2-1-javax-sdp"><a href="#2-1-javax-sdp" class="headerlink" title="2.1 javax.sdp"></a>2.1 javax.sdp</h3><p>简介：目前判定用于信令交互后的媒体RTP包对接，优先级排后</p><h3 id="2-2-javax-sip"><a href="#2-2-javax-sip" class="headerlink" title="2.2 javax.sip"></a>2.2 javax.sip</h3><p>简介：提供开发所用主叫的API接口，着重学习掌握这里</p><p>Interface ：</p><p>1、ClientTransaction ：用于向server发送transaction请求。<a href="https://cyfreeman.github.io/2020/03/13/sip-clienttransaction-shi-li/" title="用法和实例">用法和实例传送</a></p><p>2、Dialog：端到端电话的sip流程。<a href="https://cyfreeman.github.io/2020/03/15/sip-dialog-shi-li/" title="用法和实例">用法和实例传送</a></p><p>3、ListeningPoint：监听IP端口，一般调取response信令<a href="https://cyfreeman.github.io/2020/03/16/sip-listeningpoint-shu-li/" title="用法和实例">用法和实例传送</a></p><p>4、ServerTransaction：server处理Client的sip信令及响应<a href="https://cyfreeman.github.io/2020/03/13/sip-clienttransaction-shi-li/" title="用法和实例">用法和实例传送</a></p><p>5、SipListener：为应用与sip协议栈提供衔接<a href="https://cyfreeman.github.io/2020/03/16/sip-siplistener-shu-li/" title="用法和实例">用法和实例传送</a></p><p>6、SipProvider：基于sip协议栈传送消息实体<a href="https://cyfreeman.github.io/2020/03/16/sip-sipprovider-shu-li//" title="用法和实例">用法和实例传送</a></p><p>7、SipStack：sip信令协议栈<a href="https://cyfreeman.github.io/2020/03/13/sip-clienttransaction-shi-li/" title="用法和实例">用法和实例传送</a></p><p>8、Transaction：事务——sip信令的基本组成<a href="https://cyfreeman.github.io/2020/03/13/sip-clienttransaction-shi-li/" title="用法和实例">用法和实例传送</a></p><h3 id="2-3-javax-sip-address"><a href="#2-3-javax-sip-address" class="headerlink" title="2.3 javax.sip.address"></a>2.3 javax.sip.address</h3><p>简介：用于sip信令路由寻址</p><p>Interface ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Class ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Exception ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><h3 id="2-4-javax-sip-header"><a href="#2-4-javax-sip-header" class="headerlink" title="2.4 javax.sip.header"></a>2.4 javax.sip.header</h3><p>简介：封装信令头字段</p><p>Interface ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Class ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Exception ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><h3 id="2-5-javax-sip-message"><a href="#2-5-javax-sip-message" class="headerlink" title="2.5 javax.sip.message"></a>2.5 javax.sip.message</h3><p>简介：封装sip消息体</p><p>Interface ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Class ：</p><pre class=" language-bash"><code class="language-bash"></code></pre><p>Exception ：</p><pre class=" language-bash"><code class="language-bash"></code></pre>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sip注册同一个信令交互被分解问题</title>
      <link href="/2020/03/13/sip-zhu-ce-tong-yi-ge-xin-ling-jiao-hu-bei-fen-jie-wen-ti/"/>
      <url>/2020/03/13/sip-zhu-ce-tong-yi-ge-xin-ling-jiao-hu-bei-fen-jie-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="1、现象"><a href="#1、现象" class="headerlink" title="1、现象"></a>1、现象</h2><p>正常的信令交互如下图所示</p><p><img src="/images/pasted-106.png" alt="正常的流程"></p><p>一个信令交互被分解为两个<br><img src="/images/pasted-107.png" alt="一个信令交互被分解"></p><h2 id="2、分析"><a href="#2、分析" class="headerlink" title="2、分析"></a>2、分析</h2><p>经查资料，显示sip事物transaction代表一次sip事务，包括第一个请求到最终一个请求过程。</p><p><img src="/images/pasted-108.png" alt="查资料截图"></p><p>理论上叫transactionID，但是经过查找并未发现该字眼字段，经过对正常与异常信令进行对比发现，branchID即标志一个信令交互流程，如下图所示：</p><p><img src="/images/pasted-109.png" alt="branchID"></p><h2 id="3、解决"><a href="#3、解决" class="headerlink" title="3、解决"></a>3、解决</h2><p>用同一个transactionID发送请求与响应解决了该问题</p><p><img src="/images/pasted-159.png" alt="捕捉transaction"><br><img src="/images/pasted-158.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>freeswitch 修改 rtp 端口范围</title>
      <link href="/2020/03/13/freeswitch-xiu-gai-rtp-duan-kou-fan-wei/"/>
      <url>/2020/03/13/freeswitch-xiu-gai-rtp-duan-kou-fan-wei/</url>
      
        <content type="html"><![CDATA[<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> freeswitch/conf/autoload_configsvim switch.conf.xml </code></pre><p><img src="/images/pasted-95.png" alt="修改"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于java的sip客户端注册流程梳理</title>
      <link href="/2020/03/12/ji-yu-java-de-sip-ke-hu-duan-zhu-ce-liu-cheng-shu-li/"/>
      <url>/2020/03/12/ji-yu-java-de-sip-ke-hu-duan-zhu-ce-liu-cheng-shu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="pre"><a href="#pre" class="headerlink" title="pre"></a>pre</h2><p>今天实现了基于sip信令的码号注册成功，梳理一下关键点和流程。</p><h2 id="一、Value"><a href="#一、Value" class="headerlink" title="一、Value"></a>一、Value</h2><pre class=" language-bash"><code class="language-bash">//基本信息username:注册到sip server的账号server  ：sip server的IP地址password：待注册账号的密码，需要sip server配置认可//建立sip信令SipFactory sipFactory：加载使用sip apiSipStack sipStack：为sip信令交互创建transactionID、提供收发信息IOSipProvider sipProvider：由sipStack创建，向server发送msgMessageFactory messageFactory：创建sip消息体HeaderFactory headerFactory：创建sip消息头AddressFactory addressFactory：创建地址信息ListeningPoint listeningPoint：sip消息监听地址设置Properties properties：sip消息其他属性配置ClientTransaction inviteTid：将request封装事物IP发送到sip serverRequest request：sip请求体Response response：sip server的响应体//自定义填充信息部分proxy：信令转发代理，非中转不需要填sipIPlocalIPsipport：本地端口rport：监听端口protocol <span class="token operator">=</span> <span class="token string">"UDP"</span>tag <span class="token operator">=</span> <span class="token punctuation">(</span>new Random<span class="token punctuation">(</span><span class="token punctuation">))</span>.nextInt<span class="token punctuation">(</span><span class="token punctuation">)</span>：标签，组成消息头ContactHeader contactHeader：联系消息头</code></pre><h2 id="二、初始化"><a href="#二、初始化" class="headerlink" title="二、初始化"></a>二、初始化</h2><pre class=" language-bash"><code class="language-bash">    public void init<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        try <span class="token punctuation">{</span>            // Get the local IP address.            localIP <span class="token operator">=</span> InetAddress.getLocalHost<span class="token punctuation">(</span><span class="token punctuation">)</span>.getHostAddress<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP factory and <span class="token keyword">set</span> the path name.            sipFactory <span class="token operator">=</span> SipFactory.getInstance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sipFactory.setPathName<span class="token punctuation">(</span><span class="token string">"gov.nist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create and <span class="token keyword">set</span> the SIP stack properties.            properties <span class="token operator">=</span> new Properties<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            properties.setProperty<span class="token punctuation">(</span><span class="token string">"javax.sip.STACK_NAME"</span>, <span class="token string">"stack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            properties.setProperty<span class="token punctuation">(</span><span class="token string">"gov.nist.javax.sip.TRACE_LEVEL"</span>, <span class="token string">"32"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            if<span class="token punctuation">(</span>proxy <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                properties.setProperty<span class="token punctuation">(</span><span class="token string">"javax.sip.OUTBOUND_PROXY"</span>, sipIP + <span class="token string">':'</span> + sipport + <span class="token string">'/'</span> + protocol<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            properties.setProperty<span class="token punctuation">(</span><span class="token string">"gov.nist.javax.sip.LOG_MESSAGE_CONTENT"</span>, <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            properties.setProperty<span class="token punctuation">(</span><span class="token string">"gov.nist.javax.sip.DEBUG_LOG"</span>,  <span class="token string">"mss-jsip-debuglog.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            properties.setProperty<span class="token punctuation">(</span><span class="token string">"gov.nist.javax.sip.SERVER_LOG"</span>,<span class="token string">"mss-jsip-messages.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP stack.            sipStack <span class="token operator">=</span> sipFactory.createSipStack<span class="token punctuation">(</span>this.properties<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP message factory.            messageFactory <span class="token operator">=</span> sipFactory.createMessageFactory<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP header factory.            headerFactory <span class="token operator">=</span> sipFactory.createHeaderFactory<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP address factory.            addressFactory <span class="token operator">=</span> sipFactory.createAddressFactory<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP listening point and bind it to the local IP            // address, port and protocol.            listeningPoint <span class="token operator">=</span> sipStack.createListeningPoint<span class="token punctuation">(</span>localIP, rport, protocol<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the SIP provider.            sipProvider <span class="token operator">=</span> sipStack.createSipProvider<span class="token punctuation">(</span>listeningPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Add our application as a SIP listener.            sipProvider.addSipListener<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Display the local IP address and port <span class="token keyword">in</span> the text area.        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // If an error occurs, display an error message box and exit.            System.exit<span class="token punctuation">(</span>-1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="三、注册"><a href="#三、注册" class="headerlink" title="三、注册"></a>三、注册</h2><pre class=" language-bash"><code class="language-bash">    public void register<span class="token punctuation">(</span>Response response<span class="token punctuation">)</span> <span class="token punctuation">{</span>        try <span class="token punctuation">{</span>//            cseq++<span class="token punctuation">;</span>            current_process <span class="token operator">=</span> cseq + <span class="token string">"REGISTER"</span><span class="token punctuation">;</span>            ArrayList viaHeaders <span class="token operator">=</span> new ArrayList<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ViaHeader viaHeader <span class="token operator">=</span> headerFactory.createViaHeader<span class="token punctuation">(</span>localIP,                    rport, <span class="token string">"udp"</span>, null<span class="token punctuation">)</span><span class="token punctuation">;</span>            viaHeader.setRPort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            viaHeaders.add<span class="token punctuation">(</span>viaHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>            // The <span class="token string">"Max-Forwards"</span> header.            MaxForwardsHeader maxForwardsHeader <span class="token operator">=</span> headerFactory.createMaxForwardsHeader<span class="token punctuation">(</span>70<span class="token punctuation">)</span><span class="token punctuation">;</span>            // The <span class="token string">"Call-Id"</span> header.            CallIdHeader callIdHeader <span class="token operator">=</span> sipProvider.getNewCallId<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // The <span class="token string">"CSeq"</span> header.            @SuppressWarnings<span class="token punctuation">(</span><span class="token string">"deprecation"</span><span class="token punctuation">)</span>            CSeqHeader cSeqHeader <span class="token operator">=</span> headerFactory.createCSeqHeader<span class="token punctuation">(</span>cseq,Request.REGISTER<span class="token punctuation">)</span><span class="token punctuation">;</span>            Address fromAddress <span class="token operator">=</span> addressFactory.createAddress<span class="token punctuation">(</span><span class="token string">"sip:"</span>                    + username + <span class="token string">'@'</span> + server<span class="token punctuation">)</span><span class="token punctuation">;</span>            FromHeader fromHeader <span class="token operator">=</span> headerFactory.createFromHeader<span class="token punctuation">(</span>                    fromAddress, String.valueOf<span class="token punctuation">(</span>this.tag<span class="token punctuation">))</span><span class="token punctuation">;</span>            // The <span class="token string">"To"</span> header.            ToHeader toHeader <span class="token operator">=</span> headerFactory.createToHeader<span class="token punctuation">(</span>fromAddress , null<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the contact address used <span class="token keyword">for</span> all SIP messages.            contactAddress <span class="token operator">=</span> addressFactory.createAddress<span class="token punctuation">(</span><span class="token string">"sip:"</span> + username + <span class="token string">"@"</span>+ localIP +<span class="token string">":"</span>+rport+ <span class="token string">";"</span>+ <span class="token string">"transport=UDP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // Create the contact header used <span class="token keyword">for</span> all SIP messages.            contactHeader <span class="token operator">=</span> headerFactory.createContactHeader<span class="token punctuation">(</span>contactAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>            URI requestURI <span class="token operator">=</span> addressFactory.createURI<span class="token punctuation">(</span><span class="token string">"sip:"</span> + server<span class="token punctuation">)</span><span class="token punctuation">;</span>            request <span class="token operator">=</span> messageFactory.createRequest<span class="token punctuation">(</span>requestURI, Request.REGISTER,callIdHeader, cSeqHeader, fromHeader, toHeader, viaHeaders, maxForwardsHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>            request.addHeader<span class="token punctuation">(</span>contactHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>//      System.out.println<span class="token punctuation">(</span>request.toString<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>            if<span class="token punctuation">(</span>response <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>                System.out.println<span class="token punctuation">(</span>response.toString<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>response.getStatusCode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> 401<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    AuthorizationHeader authHeader <span class="token operator">=</span> makeAuthHeader<span class="token punctuation">(</span>headerFactory, response, request, username, password<span class="token punctuation">)</span><span class="token punctuation">;</span>                    request.addHeader<span class="token punctuation">(</span>authHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>                    inviteTid <span class="token operator">=</span> sipProvider.getNewClientTransaction<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>                    // send the request out.                    inviteTid.sendRequest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token punctuation">{</span>                inviteTid <span class="token operator">=</span> sipProvider.getNewClientTransaction<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>                // send the request out.                inviteTid.sendRequest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>//      dialog <span class="token operator">=</span> inviteTid.getDialog<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System.out.println<span class="token punctuation">(</span>request.toString<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>            // Send the request statelessly through the SIP provider.//          this.sipProvider.sendRequest<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>            // Display the message <span class="token keyword">in</span> the text area.//      logger.debug<span class="token punctuation">(</span><span class="token string">"Request sent:\n"</span> + request.toString<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            // If an error occurred, display the error.            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>//      logger.debug<span class="token punctuation">(</span><span class="token string">"Request sent failed: "</span> + e.getMessage<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="四、鉴权"><a href="#四、鉴权" class="headerlink" title="四、鉴权"></a>四、鉴权</h2><pre class=" language-bash"><code class="language-bash">    private AuthorizationHeader makeAuthHeader<span class="token punctuation">(</span>HeaderFactory headerFactory2,  Response response, Request request, String username2,                                               String password2<span class="token punctuation">)</span> throws ParseException <span class="token punctuation">{</span>        // TODO Auto-generated method stub        // Authenticate header with challenge we need to reply to        WWWAuthenticateHeader ah_c <span class="token operator">=</span>  <span class="token punctuation">(</span>WWWAuthenticateHeader<span class="token punctuation">)</span>response.getHeader<span class="token punctuation">(</span>WWWAuthenticateHeader.NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>        // Authorization header we will build with response to challenge        AuthorizationHeader ah_r <span class="token operator">=</span>    headerFactory.createAuthorizationHeader<span class="token punctuation">(</span>ah_c.getScheme<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>        // assemble data we need to create response string        URI request_uri <span class="token operator">=</span> request.getRequestURI<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String request_method <span class="token operator">=</span> request.getMethod<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String nonce  <span class="token operator">=</span> ah_c.getNonce<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String algrm  <span class="token operator">=</span> ah_c.getAlgorithm<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String realm  <span class="token operator">=</span> ah_c.getRealm<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MessageDigest mdigest<span class="token punctuation">;</span>        try <span class="token punctuation">{</span>            mdigest <span class="token operator">=</span> MessageDigest.getInstance<span class="token punctuation">(</span>algrm<span class="token punctuation">)</span><span class="token punctuation">;</span>            // A1            String A1 <span class="token operator">=</span> username + <span class="token string">":"</span> + realm + <span class="token string">":"</span> + password<span class="token punctuation">;</span>            String HA1 <span class="token operator">=</span> toHexString<span class="token punctuation">(</span>mdigest.digest<span class="token punctuation">(</span>A1.getBytes<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // A2            String A2 <span class="token operator">=</span> request_method.toUpperCase<span class="token punctuation">(</span><span class="token punctuation">)</span> + <span class="token string">":"</span> + request_uri <span class="token punctuation">;</span>            String HA2 <span class="token operator">=</span> toHexString<span class="token punctuation">(</span>mdigest.digest<span class="token punctuation">(</span>A2.getBytes<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            // KD            String KD <span class="token operator">=</span> HA1 + <span class="token string">":"</span> + nonce + <span class="token string">":"</span> + HA2<span class="token punctuation">;</span>            String responsenew <span class="token operator">=</span> toHexString<span class="token punctuation">(</span>mdigest.digest<span class="token punctuation">(</span>KD.getBytes<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setUsername<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setRealm<span class="token punctuation">(</span>realm<span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setNonce<span class="token punctuation">(</span>nonce<span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setURI<span class="token punctuation">(</span>request_uri<span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setAlgorithm<span class="token punctuation">(</span>algrm<span class="token punctuation">)</span><span class="token punctuation">;</span>            ah_r.setResponse<span class="token punctuation">(</span>responsenew<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>NoSuchAlgorithmException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            // TODO Auto-generated catch block            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ah_r<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sip码号注册鉴权失败</title>
      <link href="/2020/03/12/sip-bian-yi-bao-cuo/"/>
      <url>/2020/03/12/sip-bian-yi-bao-cuo/</url>
      
        <content type="html"><![CDATA[<h2 id="鉴权失败"><a href="#鉴权失败" class="headerlink" title="鉴权失败"></a>鉴权失败</h2><pre class=" language-bash"><code class="language-bash">REGISTER sip:10.17.33.223 SIP/2.0Call-ID: d944cbb3e057911913ee89c7e8d63ba3@10.8.11.68CSeq: 21 REGISTERFrom: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>1394664510To: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span>Via: SIP/2.0/UDP 10.8.11.68:52216<span class="token punctuation">;</span>rport<span class="token punctuation">;</span>branch<span class="token operator">=</span>z9hG4bK-363034-444cdda481fef0cca553fe8b49612732Max-Forwards: 70Contact: <span class="token operator">&lt;</span>sip:1020@10.8.11.68:52216<span class="token punctuation">;</span>transport<span class="token operator">=</span>UDP<span class="token operator">></span>Content-Length: 0SIP/2.0 401 UnauthorizedVia: SIP/2.0/UDP 10.8.11.68:52216<span class="token punctuation">;</span>rport<span class="token operator">=</span>52216<span class="token punctuation">;</span>branch<span class="token operator">=</span>z9hG4bK-363034-444cdda481fef0cca553fe8b49612732From: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>1394664510To: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>9U0SFm16B9gycCall-ID: d944cbb3e057911913ee89c7e8d63ba3@10.8.11.68CSeq: 21 REGISTERUser-Agent: FreeSWITCH-mod_sofia/1.10.2-release~64bitAllow: INVITE,ACK,BYE,CANCEL,OPTIONS,MESSAGE,INFO,UPDATE,REGISTER,REFER,NOTIFY,PUBLISH,SUBSCRIBESupported: timer,path,replacesWWW-Authenticate: Digest realm<span class="token operator">=</span><span class="token string">"10.17.33.223"</span>,nonce<span class="token operator">=</span><span class="token string">"6a36fa28-8d61-4bd4-bfde-7cdaa14f3d36"</span>,algorithm<span class="token operator">=</span>MD5,qop<span class="token operator">=</span><span class="token string">"auth"</span>Content-Length: 0REGISTER sip:10.17.33.223 SIP/2.0Call-ID: 8376f2ed62ec7622353d3d5fae0bc2ff@10.8.11.68CSeq: 22 REGISTERFrom: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>1394664510To: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span>Via: SIP/2.0/UDP 10.8.11.68:52216<span class="token punctuation">;</span>rport<span class="token punctuation">;</span>branch<span class="token operator">=</span>z9hG4bK-363034-9db7b43da3b5d27dcf8a07c1c611b89dMax-Forwards: 70Contact: <span class="token operator">&lt;</span>sip:1020@10.8.11.68:52216<span class="token punctuation">;</span>transport<span class="token operator">=</span>UDP<span class="token operator">></span>Authorization: Digest username<span class="token operator">=</span><span class="token string">"1020"</span>,realm<span class="token operator">=</span><span class="token string">"10.17.33.223"</span>,nonce<span class="token operator">=</span><span class="token string">"6a36fa28-8d61-4bd4-bfde-7cdaa14f3d36"</span>,uri<span class="token operator">=</span><span class="token string">"sip:10.17.33.223"</span>,algorithm<span class="token operator">=</span>MD5,response<span class="token operator">=</span><span class="token string">"553a2b907a0769e3a1f57430f7163987"</span>Content-Length: 0SIP/2.0 403 ForbiddenVia: SIP/2.0/UDP 10.8.11.68:52216<span class="token punctuation">;</span>rport<span class="token operator">=</span>52216<span class="token punctuation">;</span>branch<span class="token operator">=</span>z9hG4bK-363034-9db7b43da3b5d27dcf8a07c1c611b89dFrom: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>1394664510To: <span class="token operator">&lt;</span>sip:username@10.17.33.223<span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span>a5SjHFja9H7grCall-ID: 8376f2ed62ec7622353d3d5fae0bc2ff@10.8.11.68CSeq: 22 REGISTERUser-Agent: FreeSWITCH-mod_sofia/1.10.2-release~64bitAllow: INVITE,ACK,BYE,CANCEL,OPTIONS,MESSAGE,INFO,UPDATE,REGISTER,REFER,NOTIFY,PUBLISH,SUBSCRIBESupported: timer,path,replacesContent-Length: 0</code></pre><h2 id="定位问题"><a href="#定位问题" class="headerlink" title="定位问题"></a>定位问题</h2><p>抓包显示找不到该用户：<br>2020-03-12 07:00:51.918859 [WARNING] sofia_reg.c:2929 Can’t find user [<a href="mailto:1020@10.17.33.223">1020@10.17.33.223</a>] from 10.8.11.68</p><p><img src="/images/pasted-84.png" alt="显示找不到用户"></p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>freeswitch默认账户1000~1019，用1020测试并未配置该用户，改用1019成功注册！</p><p><img src="/images/pasted-85.png" alt="successful"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sip编译报错gov.nist.javax.sip.SipStackImpl could not be instantiated. Ensure the Path Name has been set.</title>
      <link href="/2020/03/11/sip-bian-yi-bao-cuo-gov.nist.javax.sip.sipstackimpl-could-not-be-instantiated.ensure-the-path-name-has-been-set./"/>
      <url>/2020/03/11/sip-bian-yi-bao-cuo-gov.nist.javax.sip.sipstackimpl-could-not-be-instantiated.ensure-the-path-name-has-been-set./</url>
      
        <content type="html"><![CDATA[<h2 id="报错："><a href="#报错：" class="headerlink" title="报错："></a>报错：</h2><pre class=" language-bash"><code class="language-bash">javax.sip.PeerUnavailableException: The Peer SIP Stack: gov.nist.javax.sip.SipStackImpl could not be instantiated. Ensure the Path Name has been set.    at javax.sip.SipFactory.createStack<span class="token punctuation">(</span>SipFactory.java:324<span class="token punctuation">)</span>    at javax.sip.SipFactory.createSipStack<span class="token punctuation">(</span>SipFactory.java:152<span class="token punctuation">)</span></code></pre><h2 id="解决："><a href="#解决：" class="headerlink" title="解决："></a>解决：</h2><p>添加log4j到pom.xml</p><pre class=" language-bash"><code class="language-bash">        <span class="token operator">&lt;</span><span class="token operator">!</span>-- https://mvnrepository.com/artifact/log4j/log4j --<span class="token operator">></span>        <span class="token operator">&lt;</span>dependency<span class="token operator">></span>            <span class="token operator">&lt;</span>groupId<span class="token operator">></span>log4j<span class="token operator">&lt;</span>/groupId<span class="token operator">></span>            <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>log4j<span class="token operator">&lt;</span>/artifactId<span class="token operator">></span>            <span class="token operator">&lt;</span>version<span class="token operator">></span>1.2.17<span class="token operator">&lt;</span>/version<span class="token operator">></span>        <span class="token operator">&lt;</span>/dependency<span class="token operator">></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决freeswitch语音文件加载慢问题</title>
      <link href="/2020/03/10/jie-jue-freeswitch-yu-yin-wen-jian-xia-zai-man-wen-ti/"/>
      <url>/2020/03/10/jie-jue-freeswitch-yu-yin-wen-jian-xia-zai-man-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>make -j cd-sounds-install<br>make -j cd-moh-install<br>总是下载的很慢，有时间的话可以等待，我一般晚上下班回家前执行，第二天来就弄好了，如果急的话，也可以从windows下载，再通过XFTP等工具挪到服务器，chmod一下权限即可直接安装。</p><p><img src="/images/pasted-81.png" alt="存放目录"></p>]]></content>
      
      
      <categories>
          
          <category> media </category>
          
      </categories>
      
      
        <tags>
            
            <tag> media </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器被国外IP恶意扫描处理方法</title>
      <link href="/2020/03/10/fu-wu-qi-bei-guo-wai-ip-e-yi-sao-miao-chu-li-fang-fa/"/>
      <url>/2020/03/10/fu-wu-qi-bei-guo-wai-ip-e-yi-sao-miao-chu-li-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>服务器遇到被荷兰某ip疯狂扫描，最初采取添加黑名单方式，添加了几百个，貌似对方会变换IP继续攻击<br>可以启用fail2ban  尝试3次失败的ip ban掉的方法来屏蔽<br><img src="/images/pasted-80.png" alt="被荷兰某IP疯狂扫描"></p>]]></content>
      
      
      <categories>
          
          <category> networkArchitecture </category>
          
      </categories>
      
      
        <tags>
            
            <tag> network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux编译安装制定安装路径（freeswitch为例））</title>
      <link href="/2020/03/10/linux-bian-yi-an-zhuang-zhi-ding-an-zhuang-lu-jing-freeswitch-wei-li/"/>
      <url>/2020/03/10/linux-bian-yi-an-zhuang-zhi-ding-an-zhuang-lu-jing-freeswitch-wei-li/</url>
      
        <content type="html"><![CDATA[<h2 id="problem："><a href="#problem：" class="headerlink" title="problem："></a>problem：</h2><p>请问怎么指定freeswitch的安装目录？</p><h2 id="solved："><a href="#solved：" class="headerlink" title="solved："></a>solved：</h2><p>./configure –prefix=”your prefer path….”</p><p>example：./configure –prefix=/opt/fscy，后续安装会安装到/opt/fscy目录下。</p><h2 id="analyse"><a href="#analyse" class="headerlink" title="analyse"></a>analyse</h2><p>说明一下–prefix参数的作用，其主要用在编译安装源代码应用中的./configure环节。</p><p>1、源码安装一般包括几个步骤：配置（configure），编译（make），安装（make install）。</p><p>2、其中configure是一个可执行脚本，在源码目录中执行可以完成自动的配置工作，即./configure。</p><p>3、在实际的安装过程中，我们可以增加–prefix参数，这样可以将要安装的应用安装到指定的目录中，如，我们要安装git应用，在配置环节可以使用如下命令：</p><p>./configure –prefix=/usr/local/git<br>之后再执行make &amp; make install命令就可以将git安装到了/usr/local/git目录中，这样做的好处就是方便以后的维护。</p>]]></content>
      
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> backend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo一篇文章归属多个categories设置</title>
      <link href="/2020/03/09/hexo-yi-pian-wen-zhang-gui-shu-duo-ge-categories-she-zhi/"/>
      <url>/2020/03/09/hexo-yi-pian-wen-zhang-gui-shu-duo-ge-categories-she-zhi/</url>
      
        <content type="html"><![CDATA[<p>在categories下归属子目录前后加[]，不加的话默认media的路径为/signalinng/media</p><p><img src="/images/pasted-79.png" alt="示意"></p>]]></content>
      
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frontend </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决freeswitch黄金30S，nat穿透问题</title>
      <link href="/2020/03/09/jie-jue-freeswitch-huang-jin-30s-nat-chuan-tou-wen-ti/"/>
      <url>/2020/03/09/jie-jue-freeswitch-huang-jin-30s-nat-chuan-tou-wen-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="一、问题背景"><a href="#一、问题背景" class="headerlink" title="一、问题背景"></a>一、问题背景</h2><p>配置：<br>freeswitch服务器内网ip：10网段，公网ip120网段<br>sip终端：手机zoiper、windows linphone</p><p>错误表现：能够呼通，有信令往来，但是通了以后没有话音媒体，等30s后自动挂断</p><h2 id="二、问题分析"><a href="#二、问题分析" class="headerlink" title="二、问题分析"></a>二、问题分析</h2><p>1、用wireshark对抓包进行分析，显示信令是完整的，排除信令沟通过程问题<br>2、在fs_cli执行sofia status查看网络状态，显示如下：<br>其中10.17.33.223为内网网段，120位公网网段，</p><p><img src="/images/pasted-75.png" alt="信令交互网段"><br><img src="/images/pasted-72.png" alt="查看网络状态"><br>从信令协商过程可以看出，用的IP为内网IP，但是internal 和external配置的都是公网ip，故确定修复思路：讲internal profile的ip改为内网ip10网段。</p><p><img src="/images/pasted-73.png" alt="sip信令交互"></p><h2 id="三、修复问题"><a href="#三、修复问题" class="headerlink" title="三、修复问题"></a>三、修复问题</h2><p>修改vars.xml<br>将external_rtp_ip和external_sip_ip的赋值修改为$${local_ip_v4}<br><img src="/images/pasted-74.png" alt="修改vars.xml"><br>执行fs_cli：reloadxml、reload sofia<br>再次查看sofia status，发现已经成功修改<br><img src="/images/pasted-76.png" alt="upload successful"></p><h2 id="四、验证与问题回顾分析"><a href="#四、验证与问题回顾分析" class="headerlink" title="四、验证与问题回顾分析"></a>四、验证与问题回顾分析</h2><p>1、再次拨打电话，已经可以呼通，问题解决<br>2、问题分析回顾<br>sip信令的invite请求是由客户端发起，而客户端注册的ip地址是10网段内网Ip,请求道服务器后，服务器随即认可该客户端Ip，在信令交互结束后，通过120公网端口发送媒体，这时客户端从未与120公网网段有过信令交互，回送rtp媒体流时，无法穿透120公网的nat，导致问题媒体不通。</p><p><img src="/images/pasted-78.png" alt="客户端注册码号"><br><img src="/images/pasted-77.png" alt="手绘网络示意图"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
          <category> media </category>
          
          <category> networkArchitecture </category>
          
      </categories>
      
      
        <tags>
            
            <tag> signaling </tag>
            
            <tag> media </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>批判性思维的形成与实践</title>
      <link href="/2020/03/06/pi-pan-xing-si-wei-de-yang-cheng/"/>
      <url>/2020/03/06/pi-pan-xing-si-wei-de-yang-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="一、来源"><a href="#一、来源" class="headerlink" title="一、来源"></a>一、来源</h2><p>《批判性思维工具》——当我们要发怒时，先给自己3秒钟时间，思考下发怒的根因到底是什么，是对方的错误还是自己的小气心理，即使是别人的错误，放过别人的过错等于放过自己。</p><h2 id="二、态度"><a href="#二、态度" class="headerlink" title="二、态度"></a>二、态度</h2><p>2019年最大的认知迭代应该是接受了，每个人，做每件事，做的每一个决定，都是偏于利己的，否则社会也不会进步，我讲这句话绝非是批判性的，而是从客观端正的角度出发，某些事物也并不是非黑即白，举个例子，我们周围很多人走进社会以后存在两种反差的心态，一辈子那么短何必努力奋斗呢，安逸一点不好吗；一辈子那么短，不努力奋斗如何遇到更好的自己呢；请看两种心态的前提都是“一辈子那么短”，结论却截然相反，这便是一种利己的自我暗示的结果，只不过所谓的利己是自己认为而已，满足自己短期（安逸）或长期（努力奋斗）目标，不存在对与错。</p><h2 id="三、结论"><a href="#三、结论" class="headerlink" title="三、结论"></a>三、结论</h2><p>在三十而立的年纪，任何一种选择安逸都是为自己的懒惰寻找理由，毕业至今4年整，行动方向偏理论多一些，于某天顿悟，没有实践的理论轻飘飘的浮在表面，目标方向大致正确即可，但是决不可没有目标与方向，现定下实践方针鞭策自己：做好计划、放下怀疑、勇于实践、持续改进。</p><p>希望在2020年底有新的认知，反哺个人规划制定，以上！</p><p><img src="/images/pasted-22.png" alt="强烈推荐的一本好书"></p>]]></content>
      
      
      <categories>
          
          <category> read </category>
          
          <category> essay </category>
          
      </categories>
      
      
        <tags>
            
            <tag> read </tag>
            
            <tag> 成长 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《程序员的自我修养》</title>
      <link href="/2020/03/06/cheng-xu-yuan-de-zi-wo-xiu-yang/"/>
      <url>/2020/03/06/cheng-xu-yuan-de-zi-wo-xiu-yang/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> read </category>
          
          <category> summary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> read </tag>
            
            <tag> programer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>布里斯班黄金海岸</title>
      <link href="/2020/03/06/bu-li-si-ban-huang-jin-hai-an/"/>
      <url>/2020/03/06/bu-li-si-ban-huang-jin-hai-an/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Oceania </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Oceania </tag>
            
            <tag> Gold Coast </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大堡礁-汉密尔顿岛</title>
      <link href="/2020/03/06/da-bao-jiao/"/>
      <url>/2020/03/06/da-bao-jiao/</url>
      
        <content type="html"><![CDATA[<h2 id="一、扬帆起航"><a href="#一、扬帆起航" class="headerlink" title="一、扬帆起航"></a>一、扬帆起航</h2><p>提前一天定了紫色帆船的票，出海前往白天堂沙滩，乘风破浪前行大概2、3个小时到达白天堂沙滩</p><p><img src="/images/pasted-53.png" alt="出海"></p><p><img src="/images/pasted-59.png" alt="帆船"><br>老外在水里玩排球，所有人都穿有全身的防水服，为了防止污染海水，景色绝对是很美的，由于没有经验，这次被晒伤后，至今没有再白回来。<br><img src="/images/pasted-54.png" alt="白天堂沙滩"><br><img src="/images/pasted-60.png" alt="返程"></p><h2 id="二、大堡礁"><a href="#二、大堡礁" class="headerlink" title="二、大堡礁"></a>二、大堡礁</h2><p> 回到酒店皮肤被晒的火辣辣的痛，还掉皮，去汉密尔顿小镇买了芦荟膏，跟老婆两个人互相涂，睡觉不敢翻身，第二天一早早早起床赶船去大堡礁。<br> 开船大概3小时，到地方后有个游玩的大平台，上去做浮潜和深浅，有个简易的潜水艇，可以看水下的珊瑚礁，说实话体验一般，想看心形礁需要坐直升飞机。</p><p><img src="/images/pasted-55.png" alt="背后就是大堡礁"></p><p><img src="/images/pasted-56.png" alt="坐在潜水艇里拍的珊瑚"></p><h2 id="三、汉密尔顿岛"><a href="#三、汉密尔顿岛" class="headerlink" title="三、汉密尔顿岛"></a>三、汉密尔顿岛</h2><p>当天晚上飞到汉密尔顿岛，岛上自然风光很漂亮，酒店很贵，大概一晚要2000RMB左右，着实是肉痛，可以租两人电动车环岛游，跟老婆两个人大概用了4小时环岛一圈，很多地方景色很壮观。</p><p><img src="/images/pasted-58.png" alt="偷拍司机"><br><img src="/images/pasted-57.png" alt="岛上一角"></p><h2 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h2><p>大堡礁值得一去，估计这辈子只会去这一次，毕竟世界那么大。</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Oceania </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Oceania </tag>
            
            <tag> Great Barrier Reef </tag>
            
            <tag> hamilton island </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>慕尼黑</title>
      <link href="/2020/03/06/mu-ni-hei-kao-zhu-zhou/"/>
      <url>/2020/03/06/mu-ni-hei-kao-zhu-zhou/</url>
      
        <content type="html"><![CDATA[<h2 id="一、慕尼黑烤猪肘"><a href="#一、慕尼黑烤猪肘" class="headerlink" title="一、慕尼黑烤猪肘"></a>一、慕尼黑烤猪肘</h2><p>慕尼黑算是德国的高科技城市，在这见了个朋友，就读慕尼黑工业大学，不收学费，但是对慕尼黑印象最深的还是烤猪肘和黑啤酒，德国人喜欢吃猪肉，而且划分两个派别，南烤北煮。<br>一人一个，一定要去最正宗的几家餐厅，还有吹拉弹唱助兴，一人一个烤猪肘配一大杯黑啤，一个下图大的烤猪肘很便宜，大概人民币80多。<br><img src="/images/pasted-47.png" alt="慕尼黑烤猪肘"></p><p><img src="/images/pasted-49.png" alt="HB餐厅内的乐队"></p><h2 id="二、黑啤酒"><a href="#二、黑啤酒" class="headerlink" title="二、黑啤酒"></a>二、黑啤酒</h2><p>我以前很少喝黑啤，喜欢的人一直喜欢，不喜欢的人一次就够，我老婆属于一次就够那种，而且她觉得黑啤上头，我倒是很喜欢，有点类似苦丁茶回甘的那种口感。<br><img src="/images/pasted-48.png" alt="我喝黑啤，老婆喝黄啤！"><br><img src="/images/pasted-50.png" alt="餐厅内推销的甜甜圈"></p><h2 id="三、街边表演"><a href="#三、街边表演" class="headerlink" title="三、街边表演"></a>三、街边表演</h2><p>很投入的街边表演。<br><img src="/images/pasted-51.png" alt="很投入的表演"></p><h2 id="四、心得"><a href="#四、心得" class="headerlink" title="四、心得"></a>四、心得</h2><p>离开慕尼黑后，一直想念烤猪肘，自己没时间尝试，不知道在国内开一家这样的店会不会很火，等退休了可以尝试一下。<br><img src="/images/pasted-52.png" alt="博龙"></p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Munich </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>凡尔赛宫</title>
      <link href="/2020/03/06/fan-er-sai-gong/"/>
      <url>/2020/03/06/fan-er-sai-gong/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>凡尔赛宫（法語：Château de Versailles）位于法国巴黎西南郊外伊夫林省省会凡尔赛镇。1682年至1789年是法国的王宫及政治中心；在20世纪以后对公众开放，成为世界知名景点和人类文化遗产。</p><p>凡尔赛宫的建筑风格在17～18世纪的欧洲引起风潮，引起俄国、奥地利等国君主的羡慕仿效。彼得一世在圣彼得堡郊外修建的彼得大帝夏宫、玛丽亚·特蕾西亚在维也纳修建的美泉宫、腓特烈二世和腓特烈·威廉二世在波茨坦修建的无忧宫、以及巴伐利亚国王路德维希二世修建的海伦基姆湖宫都仿照了凡尔赛宫的宫殿和花园。</p><p><img src="/images/pasted-69.png" alt="卖油画都"></p><h2 id="一、正门"><a href="#一、正门" class="headerlink" title="一、正门"></a>一、正门</h2><p>从巴黎坐地铁就可以到凡尔赛宫，出了地铁走路大概15分钟</p><p><img src="/images/pasted-61.png" alt="正门"></p><h2 id="二、宫内"><a href="#二、宫内" class="headerlink" title="二、宫内"></a>二、宫内</h2><p>大部分景观都是油画，除了地面，其他三面墙壁都是壁画，看的不是很懂，大概讲述王室的故事和权威。<br><img src="/images/pasted-62.png" alt="壁画1"></p><p><img src="/images/pasted-63.png" alt="壁画2"></p><p><img src="/images/pasted-64.png" alt="顶棚"></p><p><img src="/images/pasted-65.png" alt="雕塑"></p><h2 id="三、后花园"><a href="#三、后花园" class="headerlink" title="三、后花园"></a>三、后花园</h2><p>修葺的很好，从宫殿出来是中心花园，左侧有个落差，可以俯瞰整个花园，正后方是左右对称的大花园，一眼望过去很整齐、壮观。</p><p><img src="/images/pasted-66.png" alt="正后花园"></p><p><img src="/images/pasted-67.png" alt="左侧后花园"></p><p><img src="/images/pasted-68.png" alt="中心后花园"></p><h2 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h2><p>论苍茫大地，谁主沉浮？<br>数风流人物，还看今朝。</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Palais de Versailles </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>莫奈花园</title>
      <link href="/2020/03/06/mo-nai-hua-yuan/"/>
      <url>/2020/03/06/mo-nai-hua-yuan/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Jardin Monet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>苏黎世</title>
      <link href="/2020/03/06/su-li-shi/"/>
      <url>/2020/03/06/su-li-shi/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Zurich </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>威尼斯水城</title>
      <link href="/2020/03/06/wei-ni-si-shui-cheng/"/>
      <url>/2020/03/06/wei-ni-si-shui-cheng/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Venice water city </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五渔村</title>
      <link href="/2020/03/06/wu-yu-cun/"/>
      <url>/2020/03/06/wu-yu-cun/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cinque Terre </tag>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>米克诺斯</title>
      <link href="/2020/03/06/mi-ke-nuo-si/"/>
      <url>/2020/03/06/mi-ke-nuo-si/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> mykonos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>荷兰</title>
      <link href="/2020/03/06/a-mu-si-te-dan/"/>
      <url>/2020/03/06/a-mu-si-te-dan/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Netherlands </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>圣托里尼</title>
      <link href="/2020/03/06/sheng-tuo-li-ni/"/>
      <url>/2020/03/06/sheng-tuo-li-ni/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Santorini </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雅典卫城</title>
      <link href="/2020/03/06/ya-dian-wei-cheng/"/>
      <url>/2020/03/06/ya-dian-wei-cheng/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Athens </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿尔卑斯山少女峰</title>
      <link href="/2020/03/06/rui-shi/"/>
      <url>/2020/03/06/rui-shi/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Switzerland </tag>
            
            <tag> Alps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新天鹅堡</title>
      <link href="/2020/03/06/de-guo/"/>
      <url>/2020/03/06/de-guo/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Neuschwanstein Castle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>罗马假日</title>
      <link href="/2020/03/06/yi-da-li/"/>
      <url>/2020/03/06/yi-da-li/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Italy </tag>
            
            <tag> Rome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paris</title>
      <link href="/2020/03/06/fa-guo/"/>
      <url>/2020/03/06/fa-guo/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Europe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Europe </tag>
            
            <tag> Paris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巴厘岛</title>
      <link href="/2020/03/06/ba-li-dao/"/>
      <url>/2020/03/06/ba-li-dao/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SoutheastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Indonesia </tag>
            
            <tag> Southeast_Asia </tag>
            
            <tag> Bali </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>潜水胜地——美娜多</title>
      <link href="/2020/03/06/qian-shui-sheng-di-mei-nuo-duo/"/>
      <url>/2020/03/06/qian-shui-sheng-di-mei-nuo-duo/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SoutheastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Indonesia </tag>
            
            <tag> Southeast Asia </tag>
            
            <tag> Manado </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>普吉岛</title>
      <link href="/2020/03/06/pu-ji-dao/"/>
      <url>/2020/03/06/pu-ji-dao/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SoutheastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> SoutheastAsia </tag>
            
            <tag> pucket island </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>曼谷</title>
      <link href="/2020/03/06/man-gu/"/>
      <url>/2020/03/06/man-gu/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SoutheastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> SoutheastAsia </tag>
            
            <tag> Bankok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>越南芽庄</title>
      <link href="/2020/03/06/yue-nan-ya-zhuang/"/>
      <url>/2020/03/06/yue-nan-ya-zhuang/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SoutheastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> SoutheastAsia </tag>
            
            <tag> vitnem </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>马尔代夫</title>
      <link href="/2020/03/06/ma-er-dai-fu/"/>
      <url>/2020/03/06/ma-er-dai-fu/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> SouthAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> SouthAsia </tag>
            
            <tag> Maldives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本—东京-大阪-神户-奈良-宇治</title>
      <link href="/2020/03/06/ri-ben/"/>
      <url>/2020/03/06/ri-ben/</url>
      
        <content type="html"><![CDATA[<h2 id="一、东京——浅草寺、东京塔、富士山"><a href="#一、东京——浅草寺、东京塔、富士山" class="headerlink" title="一、东京——浅草寺、东京塔、富士山"></a>一、东京——浅草寺、东京塔、富士山</h2><p><img src="/images/pasted-117.png" alt=""></p><p><img src="/images/pasted-118.png" alt="浅草寺"></p><p><img src="/images/pasted-119.png" alt="东京塔"></p><p><img src="/images/pasted-120.png" alt="跑步的人很多"></p><p><img src="/images/pasted-126.png" alt="富士山下河口湖"></p><p><img src="/images/pasted-127.png" alt="大雾，无缘富士山"></p><p><img src="/images/pasted-128.png" alt=""></p><p><img src="/images/pasted-129.png" alt=""></p><p><img src="/images/pasted-130.png" alt=""><br><img src="/images/pasted-121.png" alt=""></p><p><img src="/images/pasted-131.png" alt="RIP"></p><h2 id="二、奈良"><a href="#二、奈良" class="headerlink" title="二、奈良"></a>二、奈良</h2><p><img src="/images/pasted-122.png" alt="神鹿"></p><p><img src="/images/pasted-125.png" alt="奈良神鹿"></p><p><img src="/images/pasted-144.png" alt="山顶"></p><p><img src="/images/pasted-145.png" alt=""></p><h2 id="三、宇治"><a href="#三、宇治" class="headerlink" title="三、宇治"></a>三、宇治</h2><p><img src="/images/pasted-123.png" alt=""></p><h2 id="四、秋叶原"><a href="#四、秋叶原" class="headerlink" title="四、秋叶原"></a>四、秋叶原</h2><p><img src="/images/pasted-132.png" alt="地铁口"></p><p><img src="/images/pasted-133.png" alt="某宅男"></p><p><img src="/images/pasted-134.png" alt=""></p><p><img src="/images/pasted-135.png" alt="手办"></p><p><img src="/images/pasted-136.png" alt=""></p><h2 id="五、神户"><a href="#五、神户" class="headerlink" title="五、神户"></a>五、神户</h2><p><img src="/images/pasted-137.png" alt="庙"></p><p><img src="/images/pasted-138.png" alt=""></p><p><img src="/images/pasted-139.png" alt=""></p><h2 id="六、北野异人馆"><a href="#六、北野异人馆" class="headerlink" title="六、北野异人馆"></a>六、北野异人馆</h2><p><img src="/images/pasted-140.png" alt=""></p><p><img src="/images/pasted-141.png" alt=""></p><p><img src="/images/pasted-142.png" alt=""></p><p><img src="/images/pasted-143.png" alt=""></p><h2 id="七、大阪环球影城"><a href="#七、大阪环球影城" class="headerlink" title="七、大阪环球影城"></a>七、大阪环球影城</h2><p><img src="/images/pasted-146.png" alt=""></p><p><img src="/images/pasted-147.png" alt=""></p><p><img src="/images/pasted-148.png" alt="哈利波特的神秘之旅"></p><p><img src="/images/pasted-149.png" alt=""></p><p><img src="/images/pasted-150.png" alt=""></p><p><img src="/images/pasted-151.png" alt=""></p><p><img src="/images/pasted-152.png" alt=""></p><p><img src="/images/pasted-153.png" alt=""></p><p><img src="/images/pasted-155.png" alt="心斋桥"></p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> EastAsia </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> EastAsia </tag>
            
            <tag> Japan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>悉尼</title>
      <link href="/2020/03/06/ao-da-li-ya/"/>
      <url>/2020/03/06/ao-da-li-ya/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Oceania </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Oceania </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>七彩云南</title>
      <link href="/2020/03/06/yun-nan/"/>
      <url>/2020/03/06/yun-nan/</url>
      
        <content type="html"><![CDATA[<h2 id="一、到丽江"><a href="#一、到丽江" class="headerlink" title="一、到丽江"></a>一、到丽江</h2><p>毕业后到成都工作，四川隔壁便是云南，第一天到丽江，住在丽江古城</p><p><img src="/images/pasted-38.png" alt="丽江古城"></p><h2 id="二、大理"><a href="#二、大理" class="headerlink" title="二、大理"></a>二、大理</h2><p>大理的东西卖的也是特别离谱，云南的旅游还需要继续整治。<br><img src="/images/pasted-39.png" alt="大理寺内的塔"></p><p><img src="/images/pasted-40.png" alt="大理寺门口"></p><p><img src="/images/pasted-41.png" alt="蝴蝶泉"></p><p><img src="/images/pasted-42.png" alt="大理古城"></p><h2 id="三、玉龙雪山"><a href="#三、玉龙雪山" class="headerlink" title="三、玉龙雪山"></a>三、玉龙雪山</h2><p>玉龙雪山被导游带去了一个假的雪山，真正的雪山是不需要坐索道的，骗我们去花钱买索道门票，只能隔山而望了。<br><img src="/images/pasted-43.png" alt="玉龙雪山山脚"></p><p><img src="/images/pasted-44.png" alt="山脚的五彩池"></p><h2 id="四、洱海"><a href="#四、洱海" class="headerlink" title="四、洱海"></a>四、洱海</h2><p>租在洱海旁边的一家客栈离住宿，早上起来可以到房顶看日出，非常的美丽。<br><img src="/images/pasted-45.png" alt="洱海的日出"></p><p><img src="/images/pasted-46.png" alt="洱海景色"></p><h2 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h2><p>云南、四川、贵州一带的自然风光非常美，是那种非常壮观的美！</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>长沙</title>
      <link href="/2020/03/06/chang-sha-zhi-xing/"/>
      <url>/2020/03/06/chang-sha-zhi-xing/</url>
      
        <content type="html"><![CDATA[<h2 id="一、到长沙"><a href="#一、到长沙" class="headerlink" title="一、到长沙"></a>一、到长沙</h2><p>一直想去湖南的橘子洲头、岳麓书院看看，湖南的小吃也是非常出名，机票来回600，周末两天来了个长沙一日半游，周六早上出发，周日下午返程。<br>到长沙后，先到饭店吃了一顿剁椒鱼头和毛氏红烧肉，之前一直对剁椒鱼头无感，这次被圈粉了，非常赞！</p><p><img src="/images/pasted-27.png" alt="剁椒鱼头+毛氏红烧肉"></p><h2 id="二、景点"><a href="#二、景点" class="headerlink" title="二、景点"></a>二、景点</h2><p>岳麓山非常大，山脚不好停车，最好坐地铁去，长沙的交通也是非常的烂，印象中跟西安差不多，岳麓山上主要有岳麓书院、黄兴墓、道观等，如果徒步上下山连观光一起估计得一天时间。</p><h2 id="2-1-岳麓书院"><a href="#2-1-岳麓书院" class="headerlink" title="2.1 岳麓书院"></a>2.1 岳麓书院</h2><p>岳麓书院要收门票，其实现了古代书院向现代大学的转型，现在接收高考报考志愿。<br>很多人穿汉服在里面拍照片。<br><img src="/images/pasted-28.png" alt="岳麓书院"></p><p><img src="/images/pasted-29.png" alt="岳麓书院后院"></p><p><img src="/images/pasted-30.png" alt="岳麓书院内"></p><p><img src="/images/pasted-31.png" alt="岳麓书院一脚"></p><h2 id="2-2-爱晚亭"><a href="#2-2-爱晚亭" class="headerlink" title="2.2 爱晚亭"></a>2.2 爱晚亭</h2><p>毛泽东经常在这里聚会、读书、探讨革命真理，根据唐代诗人杜牧：停车坐爱枫林晚，霜叶红于二月花诗句改名。</p><p><img src="/images/pasted-33.png" alt="爱晚亭"></p><p><img src="/images/pasted-34.png" alt="爱晚亭远观"></p><p><img src="/images/pasted-32.png" alt="爱晚亭碑文介绍"></p><h2 id="2-3-橘子洲头"><a href="#2-3-橘子洲头" class="headerlink" title="2.3 橘子洲头"></a>2.3 橘子洲头</h2><p>英姿飒爽、挥斥方遒、粪土当年万户侯。<br>毛泽东学生时代经常在这里读书，看中流击水浪遏飞舟的地方。</p><p><img src="/images/pasted-35.png" alt="橘子洲头标志性建筑青年毛泽东"></p><h2 id="2-4-火宫殿"><a href="#2-4-火宫殿" class="headerlink" title="2.4 火宫殿"></a>2.4 火宫殿</h2><p>火宫殿说老实话体验一般，没有小炒黄牛肉和剁椒鱼头的几个门店的菜好吃。<br><img src="/images/pasted-36.png" alt="火宫殿"><br>听说湖南的黑茶很不错<br><img src="/images/pasted-37.png" alt="黑茶"></p><h2 id="三、体会"><a href="#三、体会" class="headerlink" title="三、体会"></a>三、体会</h2><p>总体来说，长沙给我留下最大的印象是好吃，时间有限，只品尝了小炒黄牛肉、剁椒鱼头，每一顿都吃了好几碗米饭，如果下次再去游玩，一定是奔着吃去的。</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>武汉之行</title>
      <link href="/2020/03/06/wu-han-zhi-xing/"/>
      <url>/2020/03/06/wu-han-zhi-xing/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>古都西安</title>
      <link href="/2020/03/06/xi-an-zhi-xing/"/>
      <url>/2020/03/06/xi-an-zhi-xing/</url>
      
        <content type="html"><![CDATA[<p>在华为工作期间，一次机会到西安研究所出差一个月，顺便游了一下西安城</p><h2 id="一、大雁塔"><a href="#一、大雁塔" class="headerlink" title="一、大雁塔"></a>一、大雁塔</h2><p>第一次到大雁塔是读研时候，来西安出差，找峰兄简单一游，故地重游已时隔两年</p><p><img src="/images/pasted-86.png" alt="大雁塔"></p><h2 id="二、华清池"><a href="#二、华清池" class="headerlink" title="二、华清池"></a>二、华清池</h2><p><img src="/images/pasted-87.png" alt="77事变现场"></p><p><img src="/images/pasted-88.png" alt="杨贵妃？"></p><h2 id="三、兵马俑"><a href="#三、兵马俑" class="headerlink" title="三、兵马俑"></a>三、兵马俑</h2><p><img src="/images/pasted-89.png" alt="图中所示均为路人"></p><p><img src="/images/pasted-90.png" alt="甲级残废兵马俑"></p><p><img src="/images/pasted-91.png" alt="小矮马车"></p><p><img src="/images/pasted-92.png" alt="人多还是兵马俑多"></p><p><img src="/images/pasted-93.png" alt="one more"></p><p><img src="/images/pasted-94.png" alt="导游都很幽默"></p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>九寨沟</title>
      <link href="/2020/03/06/jiu-zhai-gou/"/>
      <url>/2020/03/06/jiu-zhai-gou/</url>
      
        <content type="html"><![CDATA[<p>在成都工作的第一年，肯定是要去四川最出名的九寨沟玩一下，由于九寨沟路线路线比较明确，报了一个团，坐了一天车到达终点，途径景点黄龙溪、汶川地震遗址。</p><h2 id="一、黄龙溪"><a href="#一、黄龙溪" class="headerlink" title="一、黄龙溪"></a>一、黄龙溪</h2><p><img src="/images/pasted-96.png" alt="黄龙溪"></p><h2 id="二、九寨沟"><a href="#二、九寨沟" class="headerlink" title="二、九寨沟"></a>二、九寨沟</h2><p>到达的当天晚上住宿在号称当地的5星级酒店，晚上在藏家体验了一下牦牛肉火锅，还有吹拉弹唱，第二天一早进九寨沟<br>九寨沟景色众多，而且相隔很远，景点之间需要上下电瓶车，及时这样一天也是勉强游完。<br><img src="/images/pasted-97.png" alt="九寨沟景色1"></p><p><img src="/images/pasted-98.png" alt=""><br>清澈见底，水底是各种老化掉落的灌木，非常惬意、宁静。<br><img src="/images/pasted-99.png" alt="清澈见底"></p><p><img src="/images/pasted-100.png" alt="西游记师徒三兄弟牵马走过的瀑布"></p><p><img src="/images/pasted-101.png" alt="七彩池还是五彩池"></p><p><img src="/images/pasted-102.png" alt="XX海"></p><p><img src="/images/pasted-103.png" alt=""></p><p><img src="/images/pasted-104.png" alt="壮观的藏区景色"></p><h2 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h2><p>后面地震毁了很多景色，所以说有就走的旅行很有必要，没必要什么都等明天，工作生活也是一个道理。<br>九寨归来不看水，真真是美极了。</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>西岭雪山</title>
      <link href="/2020/03/06/xi-ling-xue-shan/"/>
      <url>/2020/03/06/xi-ling-xue-shan/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>哑铃</title>
      <link href="/2020/03/05/ya-ling/"/>
      <url>/2020/03/05/ya-ling/</url>
      
        <content type="html"><![CDATA[<h3 id="当只有跑道和我时，真我便呼之欲出"><a href="#当只有跑道和我时，真我便呼之欲出" class="headerlink" title="当只有跑道和我时，真我便呼之欲出"></a>当只有跑道和我时，真我便呼之欲出</h3><h3 id="跑步是一种将自己从喧嚣的闹市剥离出来的方法"><a href="#跑步是一种将自己从喧嚣的闹市剥离出来的方法" class="headerlink" title="跑步是一种将自己从喧嚣的闹市剥离出来的方法"></a>跑步是一种将自己从喧嚣的闹市剥离出来的方法</h3><h3 id="留下时光，让时间变慢"><a href="#留下时光，让时间变慢" class="headerlink" title="留下时光，让时间变慢"></a>留下时光，让时间变慢</h3><h3 id="耐力、自律"><a href="#耐力、自律" class="headerlink" title="耐力、自律"></a>耐力、自律</h3><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p><img src="/images/pasted-21.png" alt="keep moving"></p>]]></content>
      
      
      <categories>
          
          <category> 运动 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D:/software/Git/domestic/test</title>
      <link href="/2020/03/05/d-software-git-domestic-test/"/>
      <url>/2020/03/05/d-software-git-domestic-test/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Freeswith压力测试sip和媒体rtp</title>
      <link href="/2020/03/05/freeswith-ya-li-ce-shi-sip-he-mei-ti-rtp/"/>
      <url>/2020/03/05/freeswith-ya-li-ce-shi-sip-he-mei-ti-rtp/</url>
      
        <content type="html"><![CDATA[<h2 id="pre-准备环境："><a href="#pre-准备环境：" class="headerlink" title="pre:准备环境："></a>pre:准备环境：</h2><p>10.17.33.223容器化部署freeswitch<br>笔记本电脑与手机用于录制RTP媒体包<br>10.17.33.221/222基于SIPP部署呼叫压测终端</p><h2 id="一、录制RTP流媒体文件"><a href="#一、录制RTP流媒体文件" class="headerlink" title="一、录制RTP流媒体文件"></a>一、录制RTP流媒体文件</h2><h3 id="1、手机和电脑终端注册sip流程到服务器，较简单，为减少篇幅先跳过"><a href="#1、手机和电脑终端注册sip流程到服务器，较简单，为减少篇幅先跳过" class="headerlink" title="1、手机和电脑终端注册sip流程到服务器，较简单，为减少篇幅先跳过"></a>1、手机和电脑终端注册sip流程到服务器，较简单，为减少篇幅先跳过</h3><p><img src="/images/pasted-5.png" alt="终端注册"><br><img src="/images/pasted-4.png" alt="终端注册"></p><h3 id="2、启动做好的docker-image镜像，并检查sofia-status状态OK"><a href="#2、启动做好的docker-image镜像，并检查sofia-status状态OK" class="headerlink" title="2、启动做好的docker image镜像，并检查sofia status状态OK"></a>2、启动做好的docker image镜像，并检查sofia status状态OK</h3><p><img src="/images/pasted-7.png" alt="检查网络状态"></p><h3 id="3、设置eyebeam只有ulaw语音编码器"><a href="#3、设置eyebeam只有ulaw语音编码器" class="headerlink" title="3、设置eyebeam只有ulaw语音编码器"></a>3、设置eyebeam只有ulaw语音编码器</h3><p><img src="/images/pasted-8.png" alt="设置格式"></p><h3 id="4、用wireshark抓包150秒"><a href="#4、用wireshark抓包150秒" class="headerlink" title="4、用wireshark抓包150秒"></a>4、用wireshark抓包150秒</h3><p><img src="/images/pasted-9.png" alt="wireshark抓包"></p><h2 id="二、写呼叫脚本"><a href="#二、写呼叫脚本" class="headerlink" title="二、写呼叫脚本"></a>二、写呼叫脚本</h2><h3 id="2-1-Caller-xml"><a href="#2-1-Caller-xml" class="headerlink" title="2.1 Caller.xml"></a>2.1 Caller.xml</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"us-ascii"</span>?<span class="token operator">></span><span class="token operator">&lt;</span>scenario name<span class="token operator">=</span><span class="token string">"New_call"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- In client mode <span class="token punctuation">(</span>sipp placing calls<span class="token punctuation">)</span>, the Call-ID MUST be         --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- generated by sipp. To <span class="token keyword">do</span> so, use <span class="token punctuation">[</span>call_id<span class="token punctuation">]</span> keyword.                --<span class="token operator">></span><span class="token operator">&lt;</span>send retrans<span class="token operator">=</span><span class="token string">"500"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> INVITE sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span> SIP/2.0 Via: SIP/2.0/<span class="token punctuation">[</span>transport<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>branch<span class="token operator">=</span><span class="token punctuation">[</span>branch<span class="token punctuation">]</span> From: sipp <span class="token operator">&lt;</span>sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span><span class="token punctuation">[</span>call_number<span class="token punctuation">]</span> To: sut <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span><span class="token operator">></span> Call-ID: <span class="token punctuation">[</span>call_id<span class="token punctuation">]</span> CSeq: 1 INVITE Contact: sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span> Max-Forwards: 70 Subject: Performance Test Content-Type: application/sdp Content-Length: <span class="token punctuation">[</span>len<span class="token punctuation">]</span> v<span class="token operator">=</span>0 o<span class="token operator">=</span>user1 53655765 2353687637 IN IP<span class="token punctuation">[</span>local_ip_type<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span> s<span class="token operator">=</span>- c<span class="token operator">=</span>IN IP<span class="token punctuation">[</span>media_ip_type<span class="token punctuation">]</span> <span class="token punctuation">[</span>media_ip<span class="token punctuation">]</span> t<span class="token operator">=</span>0 0 m<span class="token operator">=</span>audio <span class="token punctuation">[</span>media_port<span class="token punctuation">]</span> RTP/AVP 0 a<span class="token operator">=</span>rtpmap:0 PCMU/8000<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span><span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"100"</span> optional<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span><span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"180"</span> optional<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"181"</span> optional<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"182"</span> optional<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"183"</span> optional<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"200"</span> crlf<span class="token operator">=</span><span class="token string">"true"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span>send<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> ACK sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span> SIP/2.0 Via: SIP/2.0/<span class="token punctuation">[</span>transport<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>branch<span class="token operator">=</span><span class="token punctuation">[</span>branch<span class="token punctuation">]</span> From: sipp <span class="token operator">&lt;</span>sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span><span class="token punctuation">[</span>call_number<span class="token punctuation">]</span> To: sut <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">[</span>peer_tag_param<span class="token punctuation">]</span> Call-ID: <span class="token punctuation">[</span>call_id<span class="token punctuation">]</span> CSeq: 1 ACK Contact: sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span> Max-Forwards: 70 Subject: Performance Test Content-Length: 0<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- This delay can be customized by the -d command-line option       --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- or by adding a <span class="token string">'milliseconds = "value"'</span> option here.             --<span class="token operator">></span><span class="token operator">&lt;</span>pause milliseconds<span class="token operator">=</span><span class="token string">"1000"</span>/<span class="token operator">></span><span class="token operator">&lt;</span>nop<span class="token operator">></span><span class="token operator">&lt;</span>action<span class="token operator">></span>  <span class="token operator">&lt;</span>exec play_pcap_audio<span class="token operator">=</span><span class="token string">"./1.cap"</span><span class="token operator">></span><span class="token operator">&lt;</span>/action<span class="token operator">></span><span class="token operator">&lt;</span>/nop<span class="token operator">></span><span class="token operator">&lt;</span>pause milliseconds<span class="token operator">=</span><span class="token string">"150000"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- The <span class="token string">'crlf'</span> option inserts a blank line <span class="token keyword">in</span> the statistics report. --<span class="token operator">></span><span class="token operator">&lt;</span>send retrans<span class="token operator">=</span><span class="token string">"500"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> BYE sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span> SIP/2.0 Via: SIP/2.0/<span class="token punctuation">[</span>transport<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>branch<span class="token operator">=</span><span class="token punctuation">[</span>branch<span class="token punctuation">]</span> From: sipp <span class="token operator">&lt;</span>sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>tag<span class="token operator">=</span><span class="token punctuation">[</span>call_number<span class="token punctuation">]</span> To: sut <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>service<span class="token punctuation">]</span>@<span class="token punctuation">[</span>remote_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>remote_port<span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">[</span>peer_tag_param<span class="token punctuation">]</span> Call-ID: <span class="token punctuation">[</span>call_id<span class="token punctuation">]</span> CSeq: 2 BYE Contact: sip:sipp@<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span> Max-Forwards: 70 Subject: Performance Test Content-Length: 0<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span><span class="token operator">&lt;</span>recv response<span class="token operator">=</span><span class="token string">"200"</span> crlf<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span> <span class="token operator">&lt;</span>/recv<span class="token operator">></span><span class="token operator">&lt;</span>label id<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- definition of the response <span class="token function">time</span> repartition table <span class="token punctuation">(</span>unit is ms<span class="token punctuation">)</span>   --<span class="token operator">></span><span class="token operator">&lt;</span>ResponseTimeRepartition value<span class="token operator">=</span><span class="token string">"10, 20, 30, 40, 50, 100, 150, 200"</span>/<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- definition of the call length repartition table <span class="token punctuation">(</span>unit is ms<span class="token punctuation">)</span>     --<span class="token operator">></span><span class="token operator">&lt;</span>CallLengthRepartition value<span class="token operator">=</span><span class="token string">"10, 50, 100, 500, 1000, 5000, 10000"</span>/<span class="token operator">></span><span class="token operator">&lt;</span>/scenario<span class="token operator">></span></code></pre><h3 id="2-2-Called-xml"><a href="#2-2-Called-xml" class="headerlink" title="2.2 Called.xml"></a>2.2 Called.xml</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"ISO-8859-1"</span>?<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE scenario SYSTEM <span class="token string">"sipp.dtd"</span><span class="token operator">></span><span class="token operator">&lt;</span>scenario name<span class="token operator">=</span><span class="token string">"Basic UAS responder"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- By adding rrs<span class="token operator">=</span><span class="token string">"true"</span> <span class="token punctuation">(</span>Record Route Sets<span class="token punctuation">)</span>, the route sets         --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- are saved and used <span class="token keyword">for</span> following messages sent. Useful to <span class="token function">test</span>   --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>--  against stateful SIP proxies/B2BUAs.                              --<span class="token operator">></span><span class="token operator">&lt;</span>recv request<span class="token operator">=</span><span class="token string">"INVITE"</span> crlf<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span> <span class="token operator">&lt;</span>/recv<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- The <span class="token string">'[last_*]'</span> keyword is replaced automatically by the          --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- specified header <span class="token keyword">if</span> it was present <span class="token keyword">in</span> the last message received  --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- <span class="token punctuation">(</span>except <span class="token keyword">if</span> it was a retransmission<span class="token punctuation">)</span>. If the header was not       --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- present or <span class="token keyword">if</span> no message has been received, the <span class="token string">'[last_*]'</span>       --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- keyword is discarded, and all bytes <span class="token keyword">until</span> the end of the line    --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>--  are also discarded.                                               --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>--                                                                    --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- If the specified header was present several <span class="token function">times</span> <span class="token keyword">in</span> the         --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>-- message, all occurences are concatenated <span class="token punctuation">(</span>CRLF seperated<span class="token punctuation">)</span>        --<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span>--  to be used <span class="token keyword">in</span> place of the <span class="token string">'[last_*]'</span> keyword.                    --<span class="token operator">></span><span class="token operator">&lt;</span>send<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> SIP/2.0 180 Ringing <span class="token punctuation">[</span>last_Via:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_From:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_To:<span class="token punctuation">]</span><span class="token punctuation">;</span>tag<span class="token operator">=</span><span class="token punctuation">[</span>call_number<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_Call-ID:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_CSeq:<span class="token punctuation">]</span> Contact: <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>transport<span class="token operator">=</span><span class="token punctuation">[</span>transport<span class="token punctuation">]</span><span class="token operator">></span> Content-Length: 0<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span><span class="token operator">&lt;</span>send retrans<span class="token operator">=</span><span class="token string">"500"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> SIP/2.0 200 OK <span class="token punctuation">[</span>last_Via:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_From:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_To:<span class="token punctuation">]</span><span class="token punctuation">;</span>tag<span class="token operator">=</span><span class="token punctuation">[</span>call_number<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_Call-ID:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_CSeq:<span class="token punctuation">]</span> Contact: <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>transport<span class="token operator">=</span><span class="token punctuation">[</span>transport<span class="token punctuation">]</span><span class="token operator">></span> Content-Type: application/sdp Content-Length: <span class="token punctuation">[</span>len<span class="token punctuation">]</span> v<span class="token operator">=</span>0 o<span class="token operator">=</span>user1 53655765 2353687637 IN IP<span class="token punctuation">[</span>local_ip_type<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span> s<span class="token operator">=</span>- c<span class="token operator">=</span>IN IP<span class="token punctuation">[</span>media_ip_type<span class="token punctuation">]</span> <span class="token punctuation">[</span>media_ip<span class="token punctuation">]</span> t<span class="token operator">=</span>0 0 m<span class="token operator">=</span>audio <span class="token punctuation">[</span>media_port<span class="token punctuation">]</span> RTP/AVP 0 a<span class="token operator">=</span>rtpmap:0 PCMU/8000<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span><span class="token operator">&lt;</span>recv request<span class="token operator">=</span><span class="token string">"ACK"</span> rtd<span class="token operator">=</span><span class="token string">"true"</span> crlf<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span>   <span class="token operator">&lt;</span>/recv<span class="token operator">></span>    <span class="token operator">&lt;</span>pause milliseconds<span class="token operator">=</span><span class="token string">"1000"</span>/<span class="token operator">></span>    <span class="token operator">&lt;</span>nop<span class="token operator">></span>    <span class="token operator">&lt;</span>action<span class="token operator">></span>      <span class="token operator">&lt;</span>exec play_pcap_audio<span class="token operator">=</span><span class="token string">"./2.cap"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>/action<span class="token operator">></span>    <span class="token operator">&lt;</span>/nop<span class="token operator">></span><span class="token operator">&lt;</span>recv request<span class="token operator">=</span><span class="token string">"BYE"</span><span class="token operator">></span> <span class="token operator">&lt;</span>/recv<span class="token operator">></span><span class="token operator">&lt;</span>send<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>CDATA<span class="token punctuation">[</span> SIP/2.0 200 OK <span class="token punctuation">[</span>last_Via:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_From:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_To:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_Call-ID:<span class="token punctuation">]</span> <span class="token punctuation">[</span>last_CSeq:<span class="token punctuation">]</span> Contact: <span class="token operator">&lt;</span>sip:<span class="token punctuation">[</span>local_ip<span class="token punctuation">]</span>:<span class="token punctuation">[</span>local_port<span class="token punctuation">]</span><span class="token punctuation">;</span>transport<span class="token operator">=</span><span class="token punctuation">[</span>transport<span class="token punctuation">]</span><span class="token operator">></span> Content-Length: 0<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token operator">&lt;</span>/send<span class="token operator">></span><span class="token operator">&lt;</span>ResponseTimeRepartition value<span class="token operator">=</span><span class="token string">"10, 20, 30, 40, 50, 100, 150, 200"</span>/<span class="token operator">></span><span class="token operator">&lt;</span>CallLengthRepartition value<span class="token operator">=</span><span class="token string">"10, 50, 100, 500, 1000, 5000, 10000"</span>/<span class="token operator">></span><span class="token operator">&lt;</span>/scenario<span class="token operator">></span></code></pre><h3 id="2-3-Caller-bat"><a href="#2-3-Caller-bat" class="headerlink" title="2.3 Caller.bat"></a>2.3 Caller.bat</h3><pre class=" language-bash"><code class="language-bash">sipp -sn uac 10.17.33.223:5060 -r 4 -rp 1000 -p 15060 -i 10.17.33.221 -s 1005 -sf caller.xml -l 600</code></pre><h3 id="2-4-Called-bat"><a href="#2-4-Called-bat" class="headerlink" title="2.4 Called.bat"></a>2.4 Called.bat</h3><pre class=" language-bash"><code class="language-bash">sipp -sn uac 10.17.33.223:5060 -r 1 -rp 1000 -p 5060 -i 10.17.33.222 -s 1017 -sf caller.xml -l 1200</code></pre><h2 id="三、两台非freeswitch服务器部署sipp"><a href="#三、两台非freeswitch服务器部署sipp" class="headerlink" title="三、两台非freeswitch服务器部署sipp"></a>三、两台非freeswitch服务器部署sipp</h2><p>可参考：<a href="https://segmentfault.com/a/1190000004272862" target="_blank" rel="noopener">https://segmentfault.com/a/1190000004272862</a></p><h2 id="四、启动脚本，开始测试"><a href="#四、启动脚本，开始测试" class="headerlink" title="四、启动脚本，开始测试"></a>四、启动脚本，开始测试</h2><p>发现问题：</p><p><img src="/images/pasted-10.png" alt="问题日志"></p><p>定位发现号码不认可，添加网关：</p><p><img src="/images/pasted-11.png" alt="添加网关配置"></p><p>很多网关不需要注册即可使用，不用管这个</p><p><img src="/images/pasted-12.png" alt=""></p><p><img src="/images/pasted-71.png" alt="测通呼叫流程"><br>机器配置2vC4G，非录音情况下支撑500并发cpu利用率达到60%。</p><p><img src="/images/pasted-70.png" alt="500并发压测"></p>]]></content>
      
      
      <categories>
          
          <category> signaling </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sip </tag>
            
            <tag> 信令 </tag>
            
            <tag> 性能测试 </tag>
            
            <tag> 媒体 </tag>
            
            <tag> rtp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sip信令</title>
      <link href="/2020/03/03/article-title/"/>
      <url>/2020/03/03/article-title/</url>
      
        <content type="html"><![CDATA[<p>打桩测试</p>]]></content>
      
      
      <categories>
          
          <category> media </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/03/03/hello-world/"/>
      <url>/2020/03/03/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>最后一片净土—稻城亚丁</title>
      <link href="/2017/10/05/dao-cheng-ya-ding/"/>
      <url>/2017/10/05/dao-cheng-ya-ding/</url>
      
        <content type="html"><![CDATA[<h1 id="时间：2017-10-01-2017-10-07"><a href="#时间：2017-10-01-2017-10-07" class="headerlink" title="时间：2017.10.01~2017.10.07"></a>时间：2017.10.01~2017.10.07</h1><h2 id="一、出发"><a href="#一、出发" class="headerlink" title="一、出发"></a>一、出发</h2><p>从成都包车去稻城，路上有个隧道发生连撞车事故，导致交通堵塞，车空调坏掉没法制冷，开了7个小时后，决定返回成都改飞机到稻城</p><p><img src="/images/pasted-13.png" alt="路边"></p><p><img src="/images/pasted-14.png" alt="蓝蓝的天空"></p><h2 id="二、到达稻城县"><a href="#二、到达稻城县" class="headerlink" title="二、到达稻城县"></a>二、到达稻城县</h2><p>到达稻城的第一天晚上，出去闲逛遇到篝火，几个小孩带节奏蹦来蹦去</p><p><img src="/images/pasted-15.png" alt="篝火晚会"></p><h2 id="三、向亚丁出发"><a href="#三、向亚丁出发" class="headerlink" title="三、向亚丁出发"></a>三、向亚丁出发</h2><p>进山了，景区检票口在离亚丁至少半个多小时车程以外的地方吧<br><img src="/images/pasted-16.png" alt="镜面"></p><p><img src="/images/pasted-17.png" alt="XX牧场，名字忘了"></p><p><img src="/images/pasted-18.png" alt="雪山脚下"></p><p><img src="/images/pasted-19.png" alt=""></p><h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>景色绝对是很美的，只是我的手机比较渣<br><img src="/images/pasted-20.png" alt=""></p><h2 id="五、远方"><a href="#五、远方" class="headerlink" title="五、远方"></a>五、远方</h2><p>牛奶海没有去，有机会下次再来，下次我要骑自行车来，顺路骑车去拉萨。</p>]]></content>
      
      
      <categories>
          
          <category> Traval </category>
          
          <category> Domestic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Traval </tag>
            
            <tag> Domestic </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
